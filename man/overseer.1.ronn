overseer(1) -- run and supervise processes.
=============================================

## SYNOPSIS

`overseer` <supervisorspec>... -- <progspec...> [-- ...]

## DESCRIPTION

**overseer** Provides ordered starting, supervision and stopping of a collection
of processes. **overseer** starts a list of processes in order, then monitors
them with provided health check scripts. On failure, processes are stopped and
restarted in a well specified order following the specified restart strategy. On
unrecoverable errors, **overseer** itself aborts execution.

Arrangement of overseer invocations in a tree hierarchy allows the creation
of fault tolerant process supervision trees.

## SIGNALS

On SIGINT **overseer** sents SIGINT to all processes in reverse order, and
waits for them to exit. If the process spec has a shutdown grace period, processes
are killed with SIGKILL after the shutdown grace period has elapsed.

On SIGTERM **overseer** kills all processes in reverse order, then exits as soon
as possible. Cleanup scripts will be run in reverse order next time overseer is
restarted.

## SUPERVISOR SPEC FLAGS


  * `-strategy STRAT`:
    Use the given restart strategy.

    Strategy 'one-for-all' means if a process 
    dies or fails a health check, kill running processes in reverse order, then
    run cleanup scripts in reverse order and finally start them in order if within
    the restart intensity threshold, otherwise aborts.

    Strategy 'one-for-one' means restart any given process if it dies and the 
    overseer is within it's restart intensity threshold.


  * `-restart-duration SECONDS`:
    TODO

  * `-max-restarts NUM`:
    TODO

  * `-status-file PATH`:
    
    A json file atomically updated with the current status of overseer and it's
    children. This file can be used in the health check script of a supervising
    overseer instance to determine when the process set has started.

## PROCESS SPEC FLAGS

TODO

## EXAMPLES

    $ overseer \
      -strategy one-for all \
      -restart-duration 60 \
      -max-restarts 5 \
      -status-file ./app-status.json \
      -- \
      -name redis \
      -run ./start-redis \
      -post-start ./post-start-redis \
      -check ./check-redis \
      -log ./log-redis \
      -cleanup ./cleanup-redis \
      -- \
      -name webapp \
      -run ./start-webapp \
      -post-start ./post-start-webapp
      -check ./check-webapp \
      -log ./log-webapp \
      -cleanup ./cleanup-webapp 

## COPYRIGHT

overseer is Copyright (C) 2019 Andrew Chambers <https://acha.ninja/>

